@model SchoolEvents.Models.SchoolEvent
@{
    ViewData["Title"] = "Event Details";
}

<div class="container py-4">
    <div class="card p-4 shadow-lg">
        <h2 class="fw-bold mb-3 text-light">🎫 @Model.Title</h2>

        <dl class="row text-light mb-4">
            <dt class="col-sm-2">Start</dt>
            <dd class="col-sm-10">@Model.StartAt.ToString("f")</dd>

            <dt class="col-sm-2">End</dt>
            <dd class="col-sm-10">@Model.EndAt.ToString("f")</dd>

            <dt class="col-sm-2">Type</dt>
            <dd class="col-sm-10">@Model.Type</dd>

            <dt class="col-sm-2">Location</dt>
            <dd class="col-sm-10">@Model.Location</dd>

            <dt class="col-sm-2">Capacity</dt>
            <dd class="col-sm-10">@Model.Capacity</dd>

            <dt class="col-sm-2">Organizer</dt>
            <dd class="col-sm-10">@Model.Organizer?.Name</dd>
        </dl>

        @if (Model.Registrations != null && Model.Registrations.Count > 0)
        {
            <div class="registrations mb-4">
                <h5 class="fw-bold text-light">Registrations (@Model.Registrations.Count)</h5>
                <ul class="list-group registrations-list">
                    @foreach (var reg in Model.Registrations)
                    {
                        <li class="list-group-item bg-secondary text-light">
                            @reg.Participant?.FullName (@reg.Participant?.Email)
                        </li>
                    }
                </ul>
            </div>
        }

        <div class="mt-4 d-flex flex-wrap gap-2">
            @if (User.IsInRole("Teacher"))
            {
                <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">Edit</a>
                <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-outline-light">Delete</a>
            }
            @if (User.IsInRole("Student"))
            {
                <a asp-controller="Registrations" asp-action="Register" asp-route-eventId="@Model.Id" class="btn btn-success">
                    Register
                </a>
            }
            <a asp-action="Index" class="btn btn-outline-light">Back to List</a>
        </div>

        @if (TempData["Msg"] != null)
        {
            <div class="alert alert-info mt-3">@TempData["Msg"]</div>
        }
    </div>
</div>

<style>
    .card {
        background-color: var(--card-bg);
        color: var(--text-main);
    }

    .registrations-list {
        padding-left: 0;
        border: none;
    }

        .registrations-list li {
            border-radius: 0.25rem;
            margin-bottom: 3px;
            border: none;
        }

    .btn {
        min-width: 100px;
        font-weight: 600;
    }

    .btn-outline-light {
        color: var(--text-main);
        border-color: var(--accent);
    }

        .btn-outline-light:hover {
            background-color: var(--accent);
            color: var(--bg-main);
        }

    .btn-success {
        background-color: #28a745;
        border: none;
        color: #fff;
    }

        .btn-success:hover {
            background-color: #218838;
            color: #fff;
        }
</style>
